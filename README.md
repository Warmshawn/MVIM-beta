# MVIM-beta
## Introduction
Martensite Variant Identification Method (MVIM) is a post-processing program using the function library in OVITO. The method is based on the works published in 
1. Chia-Wei Yang and Nien-Ti Tsou* “Microstructural analysis and molecular dynamics modeling of shape memory alloys” in Computational Materials Science 131 (2017) 293–300
2. Hung-Yuan Lu, Chih-Hsuan Chen and Nien-Ti Tsou* “The Analysis of Superelasticity and Microstructural Evolution in NiTi Single Crystals by Molecular Dynamics” in Materials (2019) 12, 57; doi:10.3390/ma12010057. 

This method is developed by Yi-Ming Tseng, Hung-Yuan Lu, Chia-Wei Yang, Jo-Fan Wu, Ji-Ting Li, Hsin-Yu Chen, Prof. Chuin-Shan Chen and Prof. Nien-Ti Tsou*. It can help users to identify the microstructure of Nickel-Titanium alloys, such as Austenite, Orthorhombic, Monoclinic.

Note that this is a beta version and may not be applicable for all the cases of shape memory alloys. If this method is useful for your work, please cite the papers mentioned above. Many thanks.
## Datasets
The data in the sample folder has been processed, and the user can do the same process by average.py. The example is an indentation simulation of Ni-Ti alloy at 325K.
## Dependencies
The script has been tested under Python 3.6.X and Ovito 3.0.0 dev41x. Please refer to the "requirements.md" for the required python packages.
## Run the Code
### Average.py
The goal of average.py is to average the simulated files of Lammps to reduce the errors caused by thermal oscillation. The code that the user needs to change is as follows:
> Line 9 : Please replace the '' with the dump file generated by your Lammps simulation. * is used to represent dump files at different times.
```python
node = import_file('/Users/Desktop/simulation.*')
```
>Line 26 : Changes are selective(Default is to average 50 dump files to one dump file).You can change the value to the appropriate timesteps according to your own situation.
```python
num_average = 50
```
>Line 48&49 : Here is the folder and file name to select for output. The default file name is average.If you don't want to change the file name, you can just change the file path so that the new dump file name is average.0 avearage.1, etc
```python
f = open('/Users/file_path/average.%s'%j,'w')
    export_file(node, '/Users/file_path/average.%s'%j, 'imd',columns = ['Particle Identifier','Particle Type','Position'],frame = j)
```
### MVIM.py
Identify the microstructure of Nickel-Titanium alloy.
The code that the user needs to change is as follows:
>Line 12 : The path to the input file is the same as the path to the final output of average.py.
>Line 15 : The file location of the reference file, which is the dump file obtained after Lammps minimize. (Delete the type2 atoms by yourself.)
```python
# input file 
node = import_file('/Users/file_path/average.*')
# reference file
node_ref = import_file('/Users/file_path/ref')
```
>Line 57&399 : Set the condition of periodic boundary. True represents periodic boundary and False does not. The X,Y, and Z planes in order.
```python
with cell_ref:
    cell_ref.pbc=(True,True,True)

def compute_myproperty(frame, data):
    property_list = []
    data.cell_.pbc = (True,True,True)
```
>Line 1125&1126 : Set the output file location, as same as the average.py.
### Draw.py
Observe the change of the composition ratio of variants in different periods.
The code that the user needs to change is as follows:
>Line 6 : Set the input file location, as same as the output of MVIM.py.
```python
node = import_file('/Users/file_path/post.*')
```
>Line 75 : Describes the scale of time. The first number is 0, the second number depends on the length of time you are simulating (ps), and the third number is the number of dump files (post.*).
```python
x = np.linspace(0,1200,46)
```
>Line 76-95 :Optional adjust, because not all the variants will appear in every case, and drawing each one will make the picture messy, so you can annotate the variants that will not appear.
### All of the above code needs to run inside Ovito
![image](https://github.com/eason1021/MVIM-beta/blob/master/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202019-08-05%2001.27.20.png)
## Visualize post-processing results
After using MVIM.py, we can get the dump file with variants information and use the visualization software Ovito to visualize variants with our own colormap.
### Step1
Open the dump file in Ovito and choose color coding in the modification in the upper right corner.
![image](https://github.com/eason1021/MVIM-beta/blob/master/images/unnamed.png)
### Step2
In the adjustment window below, change the end value to 20 and click 'hot' to Load custom colormap
Then click on the colormap.jpg to see the results of the microstructure identification.
When set, it looks like this.
![image](https://github.com/eason1021/MVIM-beta/blob/master/images/unnamed%20(1).png)
## Contributing
This method is developed by Yi-Ming Tseng, Hung-Yuan Lu, Chia-Wei Yang, Jo-Fan Wu, Ji-Ting Li, Hsin-Yu Chen, Prof. Chuin-Shan Chen and Prof. Nien-Ti Tsou*. If this method is useful for your work, please cite the papers mentioned above. Many thanks.

* The corresponding author: 
Nien-Ti Tsou (tsounienti@nctu.edu.tw) 
Associate professor
Department of Materials Science and Engineering
National Chiao Tung University, Taiwan
